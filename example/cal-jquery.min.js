!function(e){e.fn.cal=function(n){var t={mondayFirst:!0,onMonthChange:function(){console.log(arguments)},onDateClick:function(){console.log(arguments)}},a=e.extend({},t,n);return this.each(function(){function n(){s>11&&(r++,s-=12),0>s&&(r--,s+=12)}function t(n,t){y.empty(),s="undefined"==typeof n?l.getMonth():n,"object"==typeof n&&(s=n.getMonth()),r="undefined"==typeof t?l.getFullYear():t;var i=new Date(r,s,1),f=i.getDay(),g=new Date(r,s+1,0).getDate(),m=new Date(r,s,0).getDate(),p=a.mondayFirst?-5:1;o(m-f+p,m),d(g),s===c.getMonth()&&(h.find(".day.current-month").eq(c.getDate()-1).addClass("selected"),console.log(e(this))),C.html(u[s]+", "+r)}function o(e,n,t){for(var a=e;n>=a;)y.append(i(a,t)),a++}function d(e){o(1,e,!0)}function i(n,t){return"undefined"==typeof n&&(n=""),e("<div>").addClass("day").addClass(t?"current-month":"").text(n)}var c=new Date,l=c,s=l.getMonth(),r=l.getFullYear(),u=["January","February","March","April","May","June","July","August","September","October","November","December"],h=e(this),f=e("<div>").addClass("btn btn-previous-month").html("&larr;").on("click",function(){s-=1,n(),"undefined"!=typeof a.onMonthChange&&a.onMonthChange(r,s),t(s,r)}),g=e("<div>").addClass("btn btn-next-month").html("&rarr;").on("click",function(){s+=1,n(),"undefined"!=typeof a.onMonthChange&&a.onMonthChange(r,s),t(s,r)}),y=e("<div>").addClass("cont-cal").on("click",".day",function(){e(this).siblings(".day.selected").removeClass("selected"),e(this).addClass("selected");var n=new Date(r,s,e(this).text());"undefined"!=typeof a.onDateClick&&a.onDateClick(n)}),C=e("<div>").addClass("cont-cal-title"),m=e("<div>").addClass("cont-cal-control").append(f,g,C);h.html("").append(m,y),t()})}}(jQuery);